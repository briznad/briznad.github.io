<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>whenVisible demo</title>
        <meta name="description" content="demo of the whenVisible jQuery/Zepto plugin">
        <meta name="viewport" content="width=540, initial-scale=1.0">

        <link rel="stylesheet" type="text/css" href="assets/css/style.css">
        <link rel="stylesheet" type="text/css" href="assets/css/plugins/highlight.sunburst.min.css">
	</head>
    <body>

    	<h1>whenVisible demo</h1>

    	<aside class="attribution">by <a href="http://twitter.com/briznad">@briznad</a></aside>

    	<section class="demo clearfix">

	    	<div class="container left">
	    		<img id="exampleImg" alt="">
	    	</div>

	    	<nav class="left">
	    		<a class="button" id="loadKitten" href="#">Load Kitten</a>
	    		<a class="button" id="runPlugin" href="#">Run Plugin</a>
	    		<a class="button" id="doBoth" href="#">Do Both</a>
	    	</nav>

    	</section>

    	<section class="explanation">

	    	<h2>Cool! <small>and/or</small> What the hell is this?!</h2>
			<hr>
	    	<p>This an example of the <a href="http://plugins.jquery.com/whenvisible">whenVisible jQuery/Zepto plugin</a>. You can read more about how the plugin works and how to use it on its <a href="https://github.com/briznad/whenvisible/">Github page</a>. The function of this demo is to load a randomly sized kitten and then reposition the kitten to be centered horizontally and vertically within its parent element, the yellow box. You can load the kitten first and then load the positioning function or load the positiong function first and then load the kitten. Or, for a more realistic example, run them both at the same time. The novelty of the plugin is that it provides a flexible and accurate way to tell when an element is visible on the screen, which can be tricky when dealing with images. A common solution is to use <a href="http://api.jquery.com/load-event/">jQuery's <span class="tech">.load</span> event method</a> either on the window object or the desired image. However, as the jQuery page explains, there are numerous bugs and gotchas when attempting to monitor image loading. Also, you have to make sure your event handler is registered prior to the image being loaded. The whenVisible plugin takes a much more basic approach to detecting if an element is loaded: it checks to see if the element has a width and height greater than 0. That's it. If the image element meets these conditions, a callback is fired. If not, the plugin will monitor the situation, repeatedly checking at a set interval for any changes. As soon as the image loads, BOOM, callback fired. Otherwise it waits. Eventually, if the element never gains a width and height, it will simply give up. Admittedly, this fills a narrow use case where such a plugin would be necessary. But I needed it, so I built it, and hopefully it can help you at some point. Enjoy!</p>

	    	<h2>Here's the demo code:</h2>
			<hr>
	    	<pre><code id="code" class="javascript code"></code></pre>

	    </section>


    	<!--[if lt IE 9]>
            <p class="chromeframe" style="position: fixed; width: 100%; top: 0; margin: 0; padding: 15px; text-align: center; background-color: #555;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

	    <script src="//cdnjs.cloudflare.com/ajax/libs/zepto/1.0/zepto.min.js"></script>
        <script>window.Zepto || document.write('<script src="assets/js/plugins/zepto.min.js"><\/script>')</script>

        <script src="assets/js/plugins/highlight.min.js"></script>

        <script src="assets/js/plugins/jquery.whenvisible.js"></script>

        <script src="assets/js/do.js"></script>

        <script>
        	$('#code').load('assets/js/do.js', function() {
        		hljs.tabReplace = '    '; // 4 spaces
        		hljs.highlightBlock($(this)[0]);
        	});
        </script>

        <script>
            var _gaq=[['_setAccount','UA-40372275-1'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>